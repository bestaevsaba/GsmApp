# Содержание

1. [Технологии](#технологии)  
2. [Установка](#установка)  
3. [Использование Makefile](#использование-makefile)  
4. [API](#api)  

----------------------------------------------------------------------------------------------------------------------------------

# Технологии

- Go 1.21+
- MySQL 8.x
- Docker & Docker Compose
- Zap (Structured Logging)

----------------------------------------------------------------------------------------------------------------------------------

# Установка

1. Установите Docker и Docker Compose  
2. Отредактируйте файл `dbconfig/config.json` для настройки подключения  
3. Запустите проект: 
``` bash
make up
```

----------------------------------------------------------------------------------------------------------------------------------

# Использование Makefile

## Установка 
```bash
sudo apt install make
```
## Доступные команды

| Команда        | Описание                                              |
|----------------|-------------------------------------------------------|
| `make up`      | Собрать и запустить контейнеры в фоне                 |
| `make down`    | Остановить и удалить контейнеры, сеть и тома          |
| `make restart` | Перезапустить все контейнеры                          |
| `make build`   | Только пересобрать Docker-образы                      |
| `make logs`    | Показать логи контейнеров в реальном времени          |
| `make ps`      | Показать список контейнеров                           |
| `make shell`   | Открыть bash‑сессию внутри контейнера `api`           |

----------------------------------------------------------------------------------------------------------------------------------

# API
## Post
### URL:

``` bash
POST http://193.233.102.3:9035/gsm
```

### Тело запроса (JSON):

``` json
{
    "name": "Device"
}
```

### Ответ (JSON):

``` json
{
    "code": 0,
    "message": "Такая запись уже существует"
}
```

## Get
### URL:

``` bash
GET http://193.233.102.3:9035/gsm/get
```

### Params

| Параметр | Тип    | Обязательный | Формат         | Описание                                       |
| -------- | ------ | ------------ | -------------- | ---------------------------------------------- |
| `from`   | string |  Да          | `YYYY-MM-DD`   | Начальная дата периода                         |
| `to`     | string |  Да          | `YYYY-MM-DD`   | Конечная дата периода                          |
| `page`   | int    |  Нет         | Целое число ≥1 | Номер страницы (по умолчанию `1`)              |
| `size`   | int    |  Нет         | Целое число ≥1 | Кол-во записей на странице (по умолчанию `10`) |

### Ответ (JSON):

``` json
{
    "data": [
        {
            "recorded_at": "2025-06-06 11:30:00"
        },
        {
            "recorded_at": "2025-06-06 14:30:00"
        },
        {
            "recorded_at": "2025-06-06 14:30:00"
        }
    ],
    "page": 1,
    "size": 5,
    "total": 3
}
```

## Коды ошибок:

0 - Успешно / уже существует.
1 - Ошибка при добавлении записи.

----------------------------------------------------------------------------------------------------------------------------------
